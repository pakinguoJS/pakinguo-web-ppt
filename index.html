<!doctype html>
<html lang="en">

    <head>
        <meta charset="utf-8">

        <title>Web前端模块化编程&开发体系 By Pakinguo</title>

        <meta name="description" content="A framework for easily creating beautiful presentations using HTML">
        <meta name="author" content="Hakim El Hattab">

        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

        <link rel="stylesheet" href="css/reveal.min.css">
        <link rel="stylesheet" href="css/theme/default.css" id="theme">

        <!-- For syntax highlighting -->
        <link rel="stylesheet" href="lib/css/zenburn.css">

        <!-- If the query includes 'print-pdf', include the PDF print sheet -->
        <script>
            if( window.location.search.match( /print-pdf/gi ) ) {
                var link = document.createElement( 'link' );
                link.rel = 'stylesheet';
                link.type = 'text/css';
                link.href = 'css/print/pdf.css';
                document.getElementsByTagName( 'head' )[0].appendChild( link );
            }
        </script>

        <!--[if lt IE 9]>
        <script src="lib/js/html5shiv.js"></script>
        <![endif]-->
    </head>

    <body>

        <div class="reveal">

            <div class="slides">
                <section>
                    <h3>Web前端模块化编程</h3>
                    <h3>与</h3>
                    <h3>开发体系</h3>
                    <p><small>@Author Pakinguo</small></p>
                    <p>
                        <img src="img/qrcode.png"/>
                    </p>
                    <p><small><a href="https://github.com/hakimel/reveal.js">PPT&nbsp;&nbsp;Powered&nbsp;&nbsp;by&nbsp;&nbsp;Reveal.js</a></small></p>
                </section>

                <section>
                    <h1 style="font-size: 3em;">内容大纲</h1>
                    <ul>
                        <li>旧项目中积累的问题</li>
                        <li>前端模块化的研究</li>
                        <li>为开发提供的新架构</li>
                        <li>设计与实践（进展中）</li>
                    </ul>
                </section>

                <section>
                    <section>
                        <h2>旧项目中积累的问题</h2>
                        <ol>
                            <li class="fragment">资源文件引入</li>
                            <li class="fragment">命名空间冲突</li>
                            <li class="fragment">JS或HTML里写DOM模板?</li>
                            <li class="fragment">JS、CSS合并压缩</li>
                            <li class="fragment">说好的复用呢(ctrl+c & v)?</li>
                            <li class="fragment">文件目录如何规范</li>
                        </ol>
                    </section>
                </section>

                <section>
                    <section>
                        <h2>前端模块化的研究</h2>
                        <ul>
                            <li>模块化的概念</li>
                            <li>模块化的意义</li>
                            <li>流行的框架</li>
                            <li>SeaJS的浅析</li>
                            <li>SeaJS的编译工具SPM与GruntJS</li>
                        </ul>
                    </section>
                    <section>
                        <h2>模块化的概念</h2>
                        <p>模块化是一种处理复杂系统分解成为更好的可管理模块的方式，它可以把系统代码划分为一系列职责单一、高度解耦且可替换的模块，系统中某一部分的变化将如何影响其它部分就会变得显而易见，系统的可维护性更加简单易得。</p>
                        <ul>
                            <li><strong>解耦</strong></li>
                            <li><strong>功能细化</strong></li>
                            <li><strong>复用性强</strong></li>
                            <li><strong>低维护成本</strong></li>
                        </ul>
                    </section>
                    <section>
                        <h2>模块化的意义</h2>
                        <ol>
                            <li>高度解耦，命名空间独立，方便协作开发</li>
                            <li>文件即是模块，按需加载，以组合方式集成大功能</li>
                            <li>通用组件多，不同页面复用性强</li>
                            <li>可扩展性强，维护成本降低</li>
                        </ol>
                    </section>
                    <section>
                        <h2>流行的框架</h2>
                        <ul>
                            <li><a href="http://labjs.com/">LABJS</a></li>
                            <li><a href="http://browserify.org/">Browserify</a></li>
                            <li><a href="http://requirejs.org/">RequireJS</a></li>
                            <li><a href="http://seajs.org/">SeaJS</a></li>
                        </ul>
                    </section>
                </section>

                <section>
                    <section>
                        <h2>SeaJS浅析——开发5步骤</h2>
                        <ul>
                            <li class="fragment">文件目录</li>
                            <li class="fragment">引入框架</li>
                            <li class="fragment">配置文件</li>
                            <li class="fragment">定义模块</li>
                            <li class="fragment">加载&使用模块</li>
                        </ul>
                    </section>
                    <section>
                        <h2>SeaJS浅析之文件目录</h2>
                        <div>
                            <label style="margin-right: 65px;margin-left: -35px">Simple Demo</label>
                            <label>Project Demo</label>
                        </div>
                        <div>
                            <img src="img/simple-dir.jpg" style="vertical-align: top;margin-right: 20px">
                            <img src="img/seajs-dir.jpg" style="vertical-align: top;">
                        </div>
                    </section>
                    <section>
                        <h2>SeaJS浅析之引入框架</h2>
                        <pre><code data-trim  style="font-size: 18px; margin-top: 20px;">
&lt;script type="text/javascript" src="../lib/sea.js"&gt;&lt;/script&gt;

&lt;script type="text/javascript" src="/front/lib/seajs/2.1.1/sea.js"&gt;&lt;/script&gt;
                        </code></pre>
                    </section>
                    <section>
                        <h2>SeaJS浅析之配置文件</h2>
                        <p>Simple Demo</p>
                        <pre><code data-trim  style="font-size: 18px; margin-top: 20px;">
(function(){
    seajs.config({
        base: '../',

        alias: {
            'jquery':   'lib/jquery.js',
            'simple.js': 'app/simple.js'
        }
    });
})()
                        </code></pre>
                    </section>
                    <section>
                        <h2>SeaJS浅析之配置文件</h2>
                        <p>Project Demo</p>
                        <pre><code data-trim  style="font-size: 18px; margin-top: 20px;" contenteditable="">
(function(){
    seajs.config({
        base: '/front/modules',

        alias: {
            // {@alias
            // {@ignore
            'jquery': '/front/lib/jquery/2.0.3/jquery.js',
            // @ignore}
            'hello.js': 'app/hello/js/hello.js',
            'alert.js': 'components/alert/js/alert.js'
            // @alias}
        },

        debug: true,

        map: []
    });
})()
                        </code></pre>
                    </section>
		    <section>
                        <h2>SeaJS浅析之定义模块</h2>
                        <p>simple.js</p>
                        <pre><code data-trim  style="font-size: 18px; margin-top: 20px;">
define define(factory)
define 接受 factory 参数，factory 可以是一个函数，也可以是一个对象或字符串。

define define(id?, deps?, factory)
define 也可以接受两个以上参数。字符串 id 表示模块标识，数组 deps 是模块依赖。
                        </code></pre>
                    </section>
                    <section>
                        <h2>SeaJS浅析之定义模块</h2>
                        <pre><code data-trim  style="font-size: 18px; margin-top: 20px;">
define define(factory)
define 接受 factory 参数，factory 可以是一个函数，也可以是一个对象或字符串。

define define(id?, deps?, factory)
define 也可以接受两个以上参数。字符串 id 表示模块标识，数组 deps 是模块依赖
                        </code></pre>
                    </section>
                    <section>
                        <h2>SeaJS浅析之定义模块</h2>
                        <p>simple.js</p>
                        <pre><code data-trim  style="font-size: 18px; margin-top: 20px;">
define(function(require, exports, module){
    var $ = require('jquery');
    $('#click').click(function(){
        $('#simple').text('This is a simple demo');
    })
})
                        </code></pre>
                    </section>
                    <section>
                        <h2>SeaJS浅析之定义模块</h2>
                        <p>tpl.alert.js</p>
                        <pre><code data-trim  style="font-size: 18px; margin-top: 20px;">
define('<div id="alert-id-{id}" class="alert-wrap">\
    <div class="alert">\
        <div class="alert-top">{txt}</div>\
        <div data-id="alert-id-{id}" data-rel="alert-ok"  class="alert-foot">OK</div>\
    </div>\
</div>')
                        </code></pre>
                    </section>
                    <section>
                        <h2>SeaJS浅析之定义模块</h2>
                        <p>alert.js</p>
                        <pre><code data-trim  style="font-size: 18px; margin-top: 20px;">
define(function(require, exports, module){
    require('components/alert/css/alert.css');
    var $ = require('jquery');
    var tpl = require('components/alert/htpl/tpl.alert.js');
    var id = 0;

    function show(txt){
        var $tpl = $(tpl.replace(/\{id\}/g, id++).replace('{txt}', txt));
        $tpl.appendTo($('body')).show();
        $tpl.find('[data-rel="alert-ok"]').click(hide);
    }

    function hide(){
        console.log($(this).attr('data-id'));
        $('#' + $(this).attr('data-id')).fadeOut(function(){
            $(this).remove();
        })
    }

    module.exports = show;
})
                        </code></pre>
                    </section>
                    <section>
                        <h2>SeaJS浅析之加载&使用模块</h2>
                        <pre><code data-trim  style="font-size: 18px; margin-top: 20px;" contenteditable="">
// hello.js
define(function(require, exports, module){
    var $ = require('jquery');
    var Alert = require('alert.js');

    $('#click').click(function(){
        Alert('Seajs modules!');
    })
});

// hello.html
&lt;script type="text/javascript"&gt;
    seajs.use('hello.js');
&lt;/script&gt;
                        </code></pre>
                    </section>
                    <section>
                        <h2>Product</h2>
                        <pre><code data-trim  style="font-size: 18px; margin-top: 20px;">
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        &lt;script type="text/javascript" src="../lib/sea.js"&gt;&lt;/script&gt;
        &lt;script type="text/javascript" src="../app/simple.conf.js"&gt;&lt;/script&gt;
        &lt;script type="text/javascript"&gt;
            seajs.use('simple.js');
        &lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        <h1>SIMPLE DEMO</h1>
        <button id="click">click</button>
        <div id="simple"></div>
    &lt;/body&gt;
&lt;/html&gt;
                        </code></pre>
                    </section>
                </section>

                <section>
                    <section>
                        <h2>SeaJS的编译工具</h2>
                        <h2>SPM与GruntJS</h2>
                    </section>
                    <section>
                        <h2>SeaJS的模块标识与依赖</h2>
                        <div style="text-align: left;font-size: 28px">
                            <p style="text-indent: 2em;"><strong>模块标识</strong>是一个字符串，用来标识模块。在require、require.async等加载函数中，第一个参数都是模块标识。</p>
                            <ul style="margin-left: 3em;">
                                <li>一个模块标识由斜线（/）分隔的多项组成。</li>
                                <li>每一项必须是小驼峰字符串、 . 或 .. 。</li>
                                <li>模块标识可以不包含文件后缀名，比如 .js。</li>
                                <li>模块标识可以是<strong>相对</strong>或<strong>顶级</strong>标识。如果第一项是 . 或 ..，则该模块标识是相对标识。</li>
                                <li>顶级标识根据模块系统的基础路径来解析。</li>
                                <li>相对标识相对<strong>require</strong>所在模块的路径来解析。</li>
                            </ul>
                            <p style="text-indent: 2em;">注意，符合上述规范的标识肯定是Sea.js的模块标识，但Sea.js能识别的模块标识不需要完全符合以上规范。比如，除了大小写字母组成的小驼峰字符串，Sea.js的模块标识字符串还可以包含下划线（_）和连字符（-）， 甚至可以是 http://、https://、file:/// 等协议开头的绝对路径。</p>
                        </div>
                    </section>
                    <section>
                        <h2>SeaJS的模块标识与依赖</h2>
                        <div style="text-align: left;font-size: 28px">
                            <p><strong>模块依赖</strong>是一个数组，用来告知Seajs在执行加载或使用的模块时，保证引用到的模块优先被加载。</p>
                            <pre><code data-trim  style="font-size: 18px; margin-top: 20px;">
define(function(require, exports, module){
    require('components/alert/css/alert.css');
    var $ = require('jquery');
    var tpl = require('components/alert/htpl/tpl.alert.js');
    var id = 0;

    ...
})
			    </code></pre>
			    <p>以上的模块，'alert.css','jquery','tpl.alert.js'三个模块会在后面的代码执行前加载。</p>
			    <p>看看进行transport后的依赖数组：</p>
			    <pre><code data-trim  style="font-size: 18px; margin-top: 20px;">
define("components/alert/js/alert", [ "components/alert/css/alert.css", "/front/lib/jquery/2.0.3/jquery.js", "components/alert/htpl/tpl.alert" ], function(require, exports, module) {
    require("components/alert/css/alert.css");
    var $ = require("/front/lib/jquery/2.0.3/jquery.js");
    var tpl = require("components/alert/htpl/tpl.alert.js");
    var id = 0;
    ...
});
			    </code></pre>
			</div>
                    </section>
                    <section>
                        <h2>标准编译SPM</h2>
                        <img src="img/spm.jpg">
                    </section>
                    <section>
                        <h2>功能齐全的GruntJS</h2>
			<img src="img/gruntjs.jpg">
			<p><a href="http://gruntjs.com/">Gruntjs.com</a></p>
                    </section>
		    <section>
                        <h2>开启GruntJS的大门</h2>
			<div style="text-align: left;font-size: 28px">
			    <pre><code data-trim  style="font-size: 20px; margin-top: 20px; line-height: 1em;">
// *前提
1、需要先安装NodeJS环境
2、安装命令行接口
npm install -g grunt-cli

// 安装插件
npm install grunt --save-dev
npm install grunt-cmd-transport --save-dev
npm install grunt-contrib-uglify --save-dev

// 创建package
方式一：npm init
方式二：ctrl + c&v

// 任务——Task Runner
			    </code></pre>
			</div>
                    </section>
		    <section>
                        <h2>GruntJS之Transport</h2>
			<div style="text-align: left;font-size: 28px">
			    <p>Transport的功能是将未带模块标识和依赖的模块编译为具有详细的模块标识及依赖数组的模块，只针对CMD有作用</p>
			    <p>GruntJS执行任务前需要创建Gruntfile.js文件，文件遵循以下的格式：</p>
			    <pre><code data-trim  style="font-size: 20px; margin-top: 20px; line-height: 1em;">
module.exports = function(grunt) {
    var root = 'E:/wamp_x64/www/0P_github/pakinguo-web-ppt/seajs-demo';   // self define

    // 初始化配置
    grunt.initConfig({
        pkg: grunt.file.readJSON('package.json'),
        transport: {
            proj: {
                options: {
                    idleading: '',
                    debug: false,
		    alias: {
			"jquery": "/front/lib/jquery/2.0.3/jquery.js",
			"hello": "app/hello/js/hello.js",
			"alert": "components/alert/js/alert.js"
		    },
		    paths: [root + 'front/modules']
		},
                files: [{
                    expand: true,
                    cwd: root + 'front/modules',
                    src: '**/*.js',
                    dest: 'E:/wamp_x64/www/0P_github/pakinguo-web-ppt/seajs-demo/front/modules_dist'
                }]
            }
        }

    });

    // 载入插件
    grunt.loadNpmTasks('grunt-cmd-transport');

    // 注册并执行任务
    grunt.registerTask('default', ['transport']);
};
			    </code></pre>
			</div>
                    </section>
		    <section>
                        <h2>GruntJS之Uglify</h2>
			<div style="text-align: left;font-size: 28px">
			    <p>Uglify是对指定的模块进行压缩或合并。</p>
			    <p>Uglify需要在进行Transport后的模块上运行，所以在注册任务时，需要把其放在Transport之后：</p>
			    <pre><code data-trim  style="font-size: 20px; margin-top: 20px; line-height: 1em;">
module.exports = function(grunt) {
    var root = 'E:/wamp_x64/www/0P_github/pakinguo-web-ppt/seajs-demo';   // self define

    // 初始化配置
    grunt.initConfig({
        pkg: grunt.file.readJSON('package.json'),
        transport: {
            proj: {
                options: {
                    idleading: '',
                    debug: false,
		    alias: {
			"jquery": "/front/lib/jquery/2.0.3/jquery.js",
			"hello": "app/hello/js/hello.js",
			"alert": "components/alert/js/alert.js"
		    },
		    paths: [root + 'front/modules']
		},
                files: [{
                    expand: true,
                    cwd: root + 'front/modules',
                    src: '**/*.js',
                    dest: 'E:/wamp_x64/www/0P_github/pakinguo-web-ppt/seajs-demo/front/modules_dist'
                }]
            }
        },

        uglify: {
            // for ivy admin iteration 1
            hello: {
                files: {
                    'E:/wamp_x64/www/0P_github/pakinguo-web-ppt/seajs-demo/front/modules_dist/app/hello/js/hello.js' : [
                    'E:/wamp_x64/www/0P_github/pakinguo-web-ppt/seajs-demo/front/modules_dist/app/hello/js/hello.js',
					'E:/wamp_x64/www/0P_github/pakinguo-web-ppt/seajs-demo/front/modules_dist/components/alert/htpl/tpl.alert.js',
					'E:/wamp_x64/www/0P_github/pakinguo-web-ppt/seajs-demo/front/modules_dist/components/alert/js/alert.js'
                    ]
                }
            }
        }

    });

    // 载入插件
    grunt.loadNpmTasks('grunt-cmd-transport');
    grunt.loadNpmTasks('grunt-contrib-uglify');

    // 注册并执行任务
    grunt.registerTask('default', ['transport', 'uglify']);
};
			    </code></pre>
			</div>
                    </section>
                </section>

                <section>
                    <section>
                        <h2>为开发提供新架构</h2>
                        <div>
                            <p>模块化的思考</p>
                            <ul style="font-size: 28px;">
                                <li class="fragment">这种模块化的开发方式还缺哪些便捷的功能？</li>
                                <li class="fragment">模块化开发配合编译工具，有哪些地方不方面呢？</li>
                                <li class="fragment">性能优化，还缺什么？Combo？</li>
                                <li class="fragment">测试、灰发与开发如何快速切换？</li>
                            </ul>
                        </div>
                    </section>
                    <section>
                        <h2>开发体系结构关系图</h2>
                        <img src="img/struct.png"/>
                    </section>
                </section>

                <section>
                    <section>
                        <h2>设计与实践（进展中）</h2>
                    </section>
                    <section>
                        <h2>标准的目录规范——灵活定制</h2>
                        <img src="img/seajs-dir.jpg" style="vertical-align: top;">
                    </section>
                </section>
            </div>

        </div>

        <script src="lib/js/head.min.js"></script>
        <script src="js/reveal.min.js"></script>

        <script>

            // Full list of configuration options available here:
            // https://github.com/hakimel/reveal.js#configuration
            Reveal.initialize({
                controls: true,
                progress: true,
                history: true,
                center: true,
                slideNumber: true,

                theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
                transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

                // Parallax scrolling
                // parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
                // parallaxBackgroundSize: '2100px 900px',

                // Optional libraries used to extend on reveal.js
                dependencies: [
                    { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
                    { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
                    { src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
                    { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
                ]
            });

        </script>

    </body>
</html>


